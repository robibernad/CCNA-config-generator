! CCNA Network Configuration
! Generated by Config Generator
!
enable
configure terminal
!
! Base Configuration
!
hostname {{ hostname }}
{% if security and security.device_access %}
{% if security.device_access.enable_secret %}
enable secret {{ security.device_access.enable_secret }}
{% endif %}
{% if security.device_access.service_password_encryption %}
service password-encryption
{% endif %}
{% if security.device_access.ssh %}
{% if security.device_access.ssh.domain_name %}
ip domain-name {{ security.device_access.ssh.domain_name }}
{% endif %}
{% endif %}
{% endif %}
!
no ip domain-lookup
!
{% if security and security.device_access.banner_motd %}
banner motd ^
{{ security.device_access.banner_motd }}
^
{% endif %}
{% if security and security.device_access.users %}
{% for user in security.device_access.users %}
username {{ user.username }}{% if user.privilege %} privilege {{ user.privilege }}{% endif %}{% if user.secret %} secret {{ user.secret }}{% elif user.password %} password {{ user.password }}{% endif %}
{% endfor %}
{% endif %}
!
{% if security and security.device_access.ssh and security.device_access.ssh.enabled %}
ip ssh version {{ security.device_access.ssh.version }}
ip ssh time-out {{ 60 if not security.device_access.ssh.exec_timeout_sec else security.device_access.ssh.exec_timeout_sec }}
ip ssh authentication-retries 2
crypto key generate rsa modulus {{ security.device_access.ssh.rsa_modulus }}
!
{% endif %}
line con 0
 logging synchronous
 exec-timeout 0 0
!
{% if security and security.device_access.ssh %}
line vty {{ security.device_access.ssh.vty_start }} {{ security.device_access.ssh.vty_end }}
 logging synchronous
 login local
 exec-timeout {{ security.device_access.ssh.exec_timeout_min }} {{ security.device_access.ssh.exec_timeout_sec }}
 {% if security.device_access.ssh.enabled and not security.device_access.ssh.allow_telnet %}
 transport input ssh
 {% elif security.device_access.ssh.enabled and security.device_access.ssh.allow_telnet %}
 transport input ssh telnet
 {% else %}
 transport input all
 {% endif %}
!
{% endif %}
!
! VRF Configuration
!
{% if routing and routing.vrfs %}
{% for vrf in routing.vrfs %}
ip vrf {{ vrf.name }}
 rd {{ vrf.rd }}
 {% if vrf.route_target_export %}route-target export {{ vrf.route_target_export }}{% endif %}
 {% if vrf.route_target_import %}route-target import {{ vrf.route_target_import }}{% endif %}
exit
{% endfor %}
!
{% endif %}
!
! Addressing Configuration
!
{% include 'switching.j2' %}
{% include 'addressing.j2' %}
!
! Routing Configuration
!
{% include 'routing.j2' %}
!
! Security Configuration - Access Control Lists
!
{% include 'security.j2' %}
!
! Services Configuration
!
{% include 'services.j2' %}
!
!
end
write memory
!
! Configuration Complete